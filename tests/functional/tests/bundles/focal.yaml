series: focal
description: "userdir-ldap charm test bundle"
machines:
  "0":
    constraints: "arch=amd64"
  "1":
    constraints: "arch=amd64"
  "2":
    constraints: "arch=amd64"
applications:
  upstream:
    charm: "ubuntu"
    options:
      hostname: "upstream"
    num_units: 1
    to:
      - "0"
  server:
    charm: "ubuntu"
    options:
      hostname: "server0"
    num_units: 1
    to:
      - "1"
  client:
    charm: "ubuntu"
    options:
      hostname: "client0"
    num_units: 1
    to:
      - "2"
  ud-ldap-server:
    series: focal
    charm: "../../."
    num_units: 0
    options:
      domain: "lxd"
      userdb-host: "userdb.internal"
      userdb-ip: "127.0.0.1"
  ud-ldap-client:
    series: bionic
    charm: "../../."
    num_units: 0
    options:
      domain: "lxd"
      userdb-host: "userdb.internal"
      template-hostname: "bootstack-template.internal"
relations:
  - - "server"
    - "ud-ldap-server"
  - - "client"
    - "ud-ldap-client"
  - - "ud-ldap-server:udprovide"
    - "ud-ldap-client:udconsume"
